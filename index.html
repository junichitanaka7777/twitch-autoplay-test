<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Twitch Embed Test</title>
</head>

<body>
  <!-- Add a twitch-autoplay-test.vercel.app for the Twitch embed -->
  <div id="twitch-embed" style="display: none;"></div>

  <button id="play-button" style="padding: 10px 20px; font-size: 16px;">Watch Stream</button>

  <!-- Load the Twitch embed script -->
  <script src="https://player.twitch.tv/js/embed/v1.js"></script>

  <!-- Create a Twitch.Player object. This will render within the twitch-autoplay-test.vercel.app div -->
  <script type="text/javascript">
    var player = null;
    var embedContainer = document.getElementById('twitch-embed');
    var playButton = document.getElementById('play-button');

    function loadStream() {
      if (player) return;
      embedContainer.style.display = 'block';
      player = new Twitch.Player("twitch-embed", {
        channel: "marbleplanetstreamer",
        muted: false,
        parent: ["twitch-autoplay-test.vercel.app"]
      });
      playButton.innerText = "Close Stream";
    }

    function stopStream() {
      embedContainer.innerHTML = ''; // Remove the player elements
      embedContainer.style.display = 'none';
      player = null; // Reset player instance
      playButton.innerText = "Watch Stream";
    }

    playButton.addEventListener('click', function () {
      if (!player) {
        loadStream();
      } else {
        stopStream();
      }
    });

    // Auto-load after 5 seconds
    setTimeout(loadStream, 5000);
  </script>
</body>

</html>